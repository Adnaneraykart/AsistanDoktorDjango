<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="utf-8">
    <title>Ã–neriler</title>
    <link rel="stylesheet" href="static/style.css">
    <style>
        /* Ok simgesinin stilini ekliyoruz */
        #scrollDownMessage {
          position: fixed;
          bottom: 20px;
          left: 50%;
          transform: translateX(-50%);
          font-size: 20px;
          color: #fff;
          background-color: rgba(0, 0, 0, 0.5);
          padding: 10px;
          border-radius: 5px;
          display: none; /* BaÅŸlangÄ±Ã§ta gizli */
        }

        .scroll-icon {
          font-size: 30px;
          display: inline-block;
          animation: bounce 1s infinite;
        }

        @keyframes bounce {
          0%, 100% {
            transform: translateY(0);
          }
          50% {
            transform: translateY(10px);
          }
        }
    </style>
</head>
<body>
<header>
    AsistanDoktor tarafÄ±ndan oluÅŸturulmuÅŸ reÃ§ete hazÄ±r
    <!-- Tema deÄŸiÅŸtirme ikonu -->
    <span id="theme-toggle" style="font-size: 2rem; cursor: pointer;">ğŸŒ</span>
</header>

<main>
    <h2>Ä°ÅŸte Doktorunuz Tavsiyeleri</h2>

    <div class="image-card">
        <img src="{{ url_for('static', filename='images/DALLÂ·E-2025-03-06-08.52_1.jpg') }}" alt="Resim AÃ§Ä±klamasÄ±">
    </div>

    {% if recommendations %}
    <ul>
        {% for disease, rec in recommendations.items() %}
        <li><strong>{{ disease }}:</strong> {{ rec }}</li>
        {% endfor %}
    </ul>
    {% else %}
    <p>Bu hastalÄ±k iÃ§in Ã¶neri bulunmamaktadÄ±r.</p>
    {% endif %}

    <!-- Flash mesajÄ±nÄ± burada, Ã¶nerilerin altÄ±nda gÃ¶steriyoruz -->
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <ul class="flashes">
        {% for category, message in messages %}
        <li style="color: {% if category == 'warning' %}orange{% else %}green{% endif %};">
            {{ message }}
        </li>
        {% endfor %}
    </ul>
    {% endif %}
    {% endwith %}

    <p>
        <a href="{{ url_for('home', reset=1) }}">Semptom SayfasÄ±</a> |
        <a href="/predict">Tahmin SonuÃ§larÄ±</a> |
        <a href="/logout">Ã‡Ä±kÄ±ÅŸ Yap</a>
    </p>
</main>

<!-- JavaScript DosyasÄ±: /static/theme-toggle.js -->
<script src="static/script.js"></script>

<!-- Fare hareketi ile kaydÄ±rma kodu -->
<script>
    // KonfigÃ¼rasyon AyarlarÄ±
    const SMOOTH_FACTOR = 0.08;   // Hedefe yumuÅŸak yaklaÅŸma oranÄ±
    const DAMPING_FACTOR = 0.85;  // HÄ±zÄ± kesme oranÄ± (daha yÃ¼kseÄŸi = daha yavaÅŸlama)
    const STOP_THRESHOLD = 0.5;   // Bu deÄŸerin altÄ± hareketin "durmuÅŸ" sayÄ±lmasÄ± iÃ§in

    let targetScroll = 0;         // Hedef kaydÄ±rma konumu
    let currentScroll = 0;        // Mevcut kaydÄ±rma konumu
    let velocity = 0;             // AnlÄ±k hÄ±z
    let isAnimating = false;      // Animasyon dÃ¶ngÃ¼sÃ¼nÃ¼n durumu

    // Mouse konumuna gÃ¶re hedef kaydÄ±rma pozisyonu belirle
    document.addEventListener(
      'mousemove',
      function(event) {
        const maxScroll = document.documentElement.scrollHeight - window.innerHeight;
        const mouseYPercentage = event.clientY / window.innerHeight;
        targetScroll = mouseYPercentage * maxScroll;

        // HalihazÄ±rda animasyon Ã§alÄ±ÅŸmÄ±yorsa baÅŸlat
        if (!isAnimating) {
          isAnimating = true;
          requestAnimationFrame(smoothScroll);
        }
      },
      { passive: true }
    );

    // AkÄ±cÄ± kaydÄ±rma dÃ¶ngÃ¼sÃ¼
    function smoothScroll() {
      // Hedefe olan mesafe
      const distance = targetScroll - currentScroll;

      // Hem mesafe hem hÄ±z Ã§ok kÃ¼Ã§Ã¼kse animasyonu durdur (mikro titreÅŸimi keser)
      if (Math.abs(distance) < STOP_THRESHOLD && Math.abs(velocity) < STOP_THRESHOLD) {
        isAnimating = false;
        return;
      }

      // HÄ±zlanma ve yavaÅŸlama hesaplarÄ±
      velocity += distance * SMOOTH_FACTOR;
      velocity *= DAMPING_FACTOR;
      currentScroll += velocity;

      // Sayfa sonu veya baÅŸÄ±nda taÅŸma olmasÄ±n diye sÄ±nÄ±rlandÄ±r
      const maxScroll = document.documentElement.scrollHeight - window.innerHeight;
      if (currentScroll < 0) {
        currentScroll = 0;
        velocity = 0;
      } else if (currentScroll > maxScroll) {
        currentScroll = maxScroll;
        velocity = 0;
      }

      // KaydÄ±rma uygula
      window.scrollTo(0, currentScroll);

      // Animasyonu sÃ¼rdÃ¼r
      requestAnimationFrame(smoothScroll);
    }

    // Sayfa yÃ¼klendikten bir sÃ¼re sonra "AÅŸaÄŸÄ± kaydÄ±rÄ±n" mesajÄ±nÄ± gÃ¶ster
    window.onload = function() {
      setTimeout(function() {
        document.getElementById('scrollDownMessage').style.display = 'block';
      }, 500);
    };
</script>


</body>
</html>
